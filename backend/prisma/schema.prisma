// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model City {
  id     Int    @id @default(autoincrement())
  name   String @unique           
  image  String?
  Bars   Bar[]
}

model Bar {
  id        Int     @id @default(autoincrement())
  sourceId  String? @unique      
  name      String
  lat       Float
  lng       Float
  address   String?
  phone     String?
  website   String?
  desc      String?                
  image     String?
  cityId    Int
  city      City    @relation(fields: [cityId], references: [id])

  @@index([cityId, name])
  @@index([lat, lng])
}

model Cocktail {
  id          Int       @id @default(autoincrement())
  name        String    @unique
  slug        String    @unique    
  abv         Int?
  tags        String[]              
  ingredients Json?                 
  steps       String[]              
  image       String?
  comment     String?
}

model Post {
  id        Int       @id @default(autoincrement())
  sourceId  Int?                   
  title     String
  author    String               
  date      DateTime?           
  tags      String[]
  body      String
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt

  @@index([date])
  @@index([author])
}
